# 블로그 플랫폼 유스케이스 명세서

## 1. 회원 관리

### 1.1 회원가입 및 인증
- 유스케이스 ID: USER-001
- 액터:
  - 주 액터: 사용자
  - 부 액터: 이메일 시스템
- 설명: 신규 사용자가 시스템에 회원으로 등록하고 인증을 완료하는 과정
- 선행조건:
  1. 사용자가 유효한 이메일 주소를 보유
  2. 시스템이 이메일 발송 가능 상태
  3. 데이터베이스 시스템 정상 작동

- 주요 흐름:
  1. 사용자가 회원가입 페이지 접속
  2. 시스템이 회원가입 폼 제공
  3. 사용자가 필수 정보 입력
     - 이메일 주소
     - 비밀번호 (8자 이상, 특수문자 포함)
     - 비밀번호 확인
     - 닉네임
     - 이용약관 동의
  4. 시스템이 입력값 유효성 검증
     - 이메일 형식 검증
     - 비밀번호 복잡도 검증
     - 필수 항목 입력 확인
  5. 시스템이 인증 이메일 발송
     - 인증 토큰 생성 (24시간 유효)
     - 인증 링크 포함하여 발송
  6. 사용자가 이메일의 인증 링크 클릭
  7. 시스템이 계정 활성화 처리
     - 인증 토큰 검증
     - 계정 상태 "활성화"로 변경
  8. 시스템이 로그인 페이지로 리다이렉트

- 대체 흐름:
  A1. OAuth 소셜 로그인 (Google)
    1a. 사용자가 구글 로그인 선택
    2a. 시스템이 Google OAuth 인증 페이지로 리다이렉트
    3a. 사용자가 Google 계정 로그인 및 권한 승인
    4a. 시스템이 Google로부터 사용자 정보 수신
      - 이메일
      - 프로필 이미지
      - 이름
    5a. 시스템이 자동으로 계정 생성 및 활성화
  
  A2. OAuth 소셜 로그인 (GitHub)
    1b. 사용자가 GitHub 로그인 선택
    2b. 시스템이 GitHub OAuth 인증 페이지로 리다이렉트
    3b. 사용자가 GitHub 계정 로그인 및 권한 승인
    4b. 시스템이 GitHub로부터 사용자 정보 수신
    5b. 시스템이 자동으로 계정 생성 및 활성화

- 예외 흐름:
  E1. 이메일 중복
    1. 시스템이 중복 이메일 오류 메시지 표시
    2. 사용자가 다른 이메일 입력
    3. 시스템이 새 이메일 주소로 검증 진행
  
  E2. 인증 만료
    1. 시스템이 인증 만료 메시지 표시
    2. 사용자가 인증 메일 재발송 요청
    3. 시스템이 새로운 인증 토큰 생성
    4. 시스템이 인증 메일 재발송
  
  E3. 비밀번호 불일치
    1. 시스템이 비밀번호 불일치 메시지 표시
    2. 사용자가 비밀번호 재입력
    3. 시스템이 비밀번호 일치 여부 재검증

  E4. 시스템 오류
    1. 시스템이 오류 메시지 표시
    2. 시스템이 관리자에게 오류 로그 전송
    3. 사용자가 다시 시도 가능

- 사후조건:
  1. 새로운 사용자 계정 생성 완료
  2. 계정이 인증된 상태로 설정
  3. 사용자 정보가 데이터베이스에 저장
  4. 인증 이력이 로그로 저장

- 비기능 요구사항:
  1. 성능
     - 회원가입 프로세스 완료까지 3초 이내
     - 인증 메일 발송은 1초 이내
  2. 보안
     - 비밀번호 SHA-256 이상의 해시 알고리즘으로 암호화
     - 인증 토큰은 충분한 길이(최소 32자)의 랜덤 문자열
  3. 가용성
     - 회원가입 시스템 99.9% 이상 가용성 보장

### 1.2 로그인
- 유스케이스 ID: USER-002
- 액터:
  - 주 액터: 등록된 회원
  - 부 액터: OAuth 제공자 (Google, GitHub)
- 설명: 등록된 회원이 시스템에 로그인하여 인증된 세션을 획득하는 과정

- 선행조건:
  1. 사용자가 유효한 계정을 보유
  2. 계정이 활성화 상태일 것

- 주요 흐름:
  1. 사용자가 로그인 페이지 접속
  2. 시스템이 로그인 폼 제공
  3. 사용자가 인증 정보 입력
     - 이메일
     - 비밀번호
  4. 시스템이 인증 정보 검증
     - 계정 존재 여부 확인
     - 비밀번호 해시 검증
  5. 시스템이 세션 생성
     - JWT 토큰 발급
     - 사용자 기본 정보 포함
  6. 시스템이 메인 페이지로 리다이렉트

- 대체 흐름:
  A1. 소셜 로그인
    1a. 사용자가 소셜 로그인 선택
    2a. 시스템이 해당 OAuth 제공자 페이지로 리다이렉트
    3a. 사용자가 소셜 계정으로 인증
    4a. 시스템이 OAuth 토큰 검증
    5a. 시스템이 자체 세션 생성
  
  A2. "로그인 상태 유지" 선택
    1b. 사용자가 로그인 상태 유지 체크박스 선택
    2b. 시스템이 장기 유효 토큰 발급 (30일)
    3b. 시스템이 토큰을 쿠키에 저장

- 예외 흐름:
  E1. 계정 정보 불일치
    1. 시스템이 로그인 실패 메시지 표시
    2. 시스템이 실패 횟수 기록
    3. 사용자가 재시도 또는 비밀번호 찾기 선택
  
  E2. 계정 잠금
    1. 로그인 5회 실패 시 시스템이 계정 잠금
    2. 시스템이 잠금 해제 이메일 발송
    3. 사용자가 이메일을 통해 잠금 해제 진행
  
  E3. 비활성화된 계정
    1. 시스템이 계정 비활성화 메시지 표시
    2. 시스템이 계정 활성화 방법 안내

- 사후조건:
  1. 사용자 세션 생성 완료
  2. 로그인 이력 저장
  3. 마지막 로그인 시간 업데이트

- 비기능 요구사항:
  1. 성능
     - 로그인 프로세스 1초 이내 완료
     - 소셜 로그인 3초 이내 완료
  2. 보안
     - HTTPS 통신 필수
     - 세션 토큰 암호화
     - 비밀번호 해시 비교는 타이밍 어택 방지

-----

## 2. 블로그 관리

### 2.1 게시글 작성
- 유스케이스 ID: BLOG-001
- 액터:
  - 주 액터: 로그인한 회원
  - 부 액터: 파일 스토리지 시스템

- 설명: 인증된 사용자가 새로운 블로그 게시글을 작성하는 과정

- 선행조건:
  1. 사용자가 로그인 상태
  2. 사용자의 게시글 작성 권한 보유

- 주요 흐름:
  1. 사용자가 글쓰기 페이지 접근
  2. 시스템이 에디터 제공
  3. 사용자가 게시글 정보 입력
     - 제목 (필수)
     - 본문 내용 (필수)
     - 태그 (선택)
     - 카테고리 (선택)
     - 썸네일 이미지 (선택)
  4. 사용자가 게시글 저장 요청
  5. 시스템이 입력값 검증
     - 필수 항목 확인
     - 금지어 필터링
     - XSS 방지 처리
  6. 시스템이 게시글 저장
  7. 시스템이 게시글 상세 페이지로 리다이렉트

- 대체 흐름:
  A1. 임시저장
    1a. 사용자가 임시저장 선택
    2a. 시스템이 임시저장 처리
    3a. 시스템이 저장 완료 메시지 표시
  
  A2. 이미지 업로드
    1b. 사용자가 이미지 업로드
    2b. 시스템이 이미지 유효성 검증
    3b. 시스템이 이미지 리사이징 및 최적화
    4b. 시스템이 스토리지에 업로드
    5b. 시스템이 이미지 URL 제공

- 예외 흐름:
  E1. 제목/본문 누락
    1. 시스템이 필수 항목 입력 요청
    2. 사용자가 누락 항목 입력
    
  E2. 이미지 업로드 실패
    1. 시스템이 업로드 실패 메시지 표시
    2. 시스템이 대체 업로드 방법 제안
  
  E3. 세션 만료
    1. 시스템이 세션 만료 메시지 표시
    2. 시스템이 작성 내용 임시저장
    3. 시스템이 로그인 페이지로 리다이렉트

- 사후조건:
  1. 새 게시글 저장 완료
  2. 연관된 태그, 카테고리 정보 저장
  3. 업로드된 파일의 스토리지 정보 저장

- 비기능 요구사항:
  1. 성능
     - 게시글 저장 2초 이내
     - 이미지 업로드 5초 이내
  2. 용량
     - 본문 최대 50,000자
     - 이미지 파일 당 최대 5MB
  3. 안정성
     - 자동 저장 기능 (1분 주기)
     - 네트워크 오류 시 복구 방안 제공

### 2.2 게시글 수정
- 유스케이스 ID: BLOG-002
- 액터:
  - 주 액터: 게시글 작성자
  - 부 액터: 파일 스토리지 시스템

- 설명: 기존 게시글의 내용을 수정하는 과정

- 선행조건:
  1. 사용자가 로그인 상태
  2. 해당 게시글의 작성자일 것
  3. 게시글이 존재하는 상태

- 주요 흐름:
  1. 사용자가 게시글 수정 페이지 접근
  2. 시스템이 기존 게시글 정보 로드
  3. 시스템이 에디터에 내용 표시
  4. 사용자가 내용 수정
  5. 사용자가 수정 사항 저장 요청
  6. 시스템이 변경사항 검증
  7. 시스템이 수정된 내용 저장
  8. 시스템이 게시글 상세 페이지로 리다이렉트

- 대체 흐름:
  A1. 수정 취소
    1a. 사용자가 수정 취소 선택
    2a. 시스템이 변경사항 폐기 확인
    3a. 시스템이 상세 페이지로 복귀
  
  A2. 수정 이력 관리
    1b. 시스템이 수정 이력 저장
    2b. 시스템이 수정 시간과 작성자 기록

- 예외 흐름:
  E1. 권한 없음
    1. 시스템이 권한 없음 메시지 표시
    2. 시스템이 이전 페이지로 리다이렉트
  
  E2. 게시글 삭제됨
    1. 시스템이 삭제된 게시글 메시지 표시
    2. 시스템이 목록 페이지로 리다이렉트

- 사후조건:
  1. 게시글 내용 업데이트
  2. 수정 이력 저장
  3. 변경된 파일 정보 저장

- 비기능 요구사항:
  1. 성능
     - 수정 내용 저장 2초 이내
  2. 동시성
     - 동시 수정 방지 잠금 처리
  3. 추적성
     - 모든 수정 이력 보관

### 2.3 게시글 삭제
- 유스케이스 ID: BLOG-003
- 액터:
  - 주 액터: 게시글 작성자
  - 부 액터: 파일 스토리지 시스템

- 설명: 기존 게시글을 삭제하는 과정

- 선행조건:
  1. 사용자가 로그인 상태
  2. 해당 게시글의 작성자이거나 관리자 권한 보유
  3. 게시글이 존재하는 상태

- 주요 흐름:
  1. 사용자가 게시글 삭제 요청
  2. 시스템이 삭제 확인 대화상자 표시
  3. 사용자가 삭제 확인
  4. 시스템이 연관 데이터 확인
  5. 시스템이 게시글 및 연관 데이터 삭제
  6. 시스템이 게시글 목록으로 리다이렉트

- 대체 흐름:
  A1. 소프트 삭제
    1a. 시스템이 게시글 상태만 변경
    2a. 시스템이 삭제 시간 기록
    3a. 관리자가 영구 삭제 가능 상태 유지

- 예외 흐름:
  E1. 권한 없음
    1. 시스템이 권한 없음 메시지 표시
    2. 시스템이 이전 페이지로 리다이렉트
  
  E2. 연관 데이터 삭제 실패
    1. 시스템이 삭제 실패 메시지 표시
    2. 시스템이 관리자에게 오류 알림

- 사후조건:
  1. 게시글 삭제 완료
  2. 연관된 파일 리소스 정리
  3. 삭제 이력 저장

- 비기능 요구사항:
  1. 성능
     - 삭제 처리 1초 이내
  2. 안정성
     - 삭제 작업 트랜잭션 처리
  3. 복구성
     - 30일 이내 복구 가능

### 2.3 게시글 조회
- 유스케이스 ID: BLOG-004
- 액터:
  - 주 액터: 모든 사용자
  - 부 액터: 검색 엔진

- 설명: 게시글 목록을 조회하고 검색하는 과정

- 선행조건:
  1. 시스템 접근 가능 상태

- 주요 흐름:
  1. 사용자가 게시글 목록 페이지 접근
  2. 시스템이 게시글 목록 로드
     - 페이지당 20개 항목
     - 최신순 정렬
  3. 시스템이 목록 표시
     - 제목
     - 작성자
     - 작성일
     - 조회수
     - 좋아요 수
  4. 사용자가 검색 조건 입력 (선택)
  5. 시스템이 검색 결과 표시

- 대체 흐름:
  A1. 태그별 필터링
    1a. 사용자가 태그 선택
    2a. 시스템이 해당 태그의 게시글만 표시
  
  A2. 카테고리별 보기
    1b. 사용자가 카테고리 선택
    2b. 시스템이 해당 카테고리 게시글 표시

- 예외 흐름:
  E1. 검색 결과 없음
    1. 시스템이 검색 결과 없음 메시지 표시
    2. 시스템이 추천 검색어 제안
    3. 시스템이 인기 게시글 목록 표시
    4. 사용자가 검색어 수정 또는 추천 검색어 선택 가능
  
  E2. 시스템 과부하
    1. 시스템이 일시적 과부하 메시지 표시
    2. 시스템이 캐시된 데이터 제공
    3. 시스템이 일정 시간 후 자동 새로고침
  
  E3. 잘못된 페이지 번호 접근
    1. 시스템이 유효하지 않은 페이지 메시지 표시
    2. 시스템이 첫 페이지로 리다이렉트

- 사후조건:
  1. 게시글 목록 또는 검색 결과 표시
  2. 조회 이력 저장
  3. 인기 검색어 통계 업데이트

- 비기능 요구사항:
  1. 성능
     - 목록 로딩 1초 이내
     - 검색 결과 2초 이내
     - 페이지 전환 0.5초 이내
  2. 확장성
     - 동시 접속자 1000명 이상 처리
     - 검색 인덱스 자동 업데이트
  3. 가용성
     - 99.9% 이상의 서비스 가용성
     - 장애 시 캐시 데이터 제공
  4. 사용성
     - 모바일 친화적 UI
     - 무한 스크롤 또는 페이지네이션 지원
     - 실시간 검색어 자동완성

-----

